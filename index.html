<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Roblox Account Tracker</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
  body {
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: #fff;
    text-align: center;
    padding: 40px;
    transition: background 0.5s;
  }
  h1 { font-size: 2.5em; margin-bottom: 20px; }
  input {
    padding: 10px;
    width: 250px;
    border-radius: 10px;
    border: none;
    margin-right: 10px;
  }
  button {
    padding: 10px 15px;
    border-radius: 10px;
    border: none;
    background: #22c55e;
    color: white;
    cursor: pointer;
    transition: transform 0.2s;
  }
  button:hover { transform: scale(1.1); }
  .card {
    margin: 30px auto;
    background: #1e293b;
    padding: 20px;
    border-radius: 20px;
    display: inline-block;
    width: 300px;
    text-align: center;
    animation: fadeIn 1s;
  }
  img { border-radius: 50%; transition: transform 0.3s; }
  img:hover { transform: rotate(15deg); }
  .loader {
    border: 6px solid #1e293b;
    border-top: 6px solid #22c55e;
    border-radius: 50%;
    width: 40px; height: 40px;
    margin: 20px auto;
    animation: spin 1s linear infinite;
  }
  .leaderboard { margin-top: 40px; }
  .leaderboard h2 { margin-bottom: 20px; }
  .leaderboard ol { text-align: left; display: inline-block; }
  @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
  @keyframes fadeIn { from {opacity:0; transform: translateY(-20px);} to {opacity:1; transform: translateY(0);} }
</style>
</head>
<body>

<h1>üéÆ Roblox Account Tracker</h1>

<input type="text" id="username" placeholder="Enter Roblox username">
<button onclick="getUser()">Search</button>

<div id="result"></div>

<div class="leaderboard">
  <h2>üî• Most Searched Users</h2>
  <ol id="topUsers"></ol>
</div>

<script>
let searchHistory = [];

async function getUser() {
  const username = document.getElementById("username").value.trim();
  if(!username) return;

  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = '<div class="loader"></div>';

  try {
    const proxy = "https://api.allorigins.win/raw?url=";

    // 1Ô∏è‚É£ Get User ID
    const userResponse = await fetch(proxy + encodeURIComponent("https://users.roblox.com/v1/usernames/users"), {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ usernames: [username], excludeBannedUsers: false })
    });
    const userData = await userResponse.json();
    if (!userData.data || !userData.data.length) {
      resultDiv.innerHTML = "User not found.";
      return;
    }
    const user = userData.data[0];

    // 2Ô∏è‚É£ Avatar
    const avatarResponse = await fetch(proxy + encodeURIComponent(`https://thumbnails.roblox.com/v1/users/avatar?userIds=${user.id}&size=150x150&format=Png&isCircular=false`));
    const avatarData = await avatarResponse.json();
    const avatarUrl = avatarData.data[0].imageUrl;

    // 3Ô∏è‚É£ Badges
    const badgesResponse = await fetch(proxy + encodeURIComponent(`https://badges.roblox.com/v1/users/${user.id}/badges`));
    const badgesData = await badgesResponse.json();
    const badges = badgesData.data.map(b => b.name).join(', ') || 'No badges';

    // 4Ô∏è‚É£ Friends
    const friendsResponse = await fetch(proxy + encodeURIComponent(`https://friends.roblox.com/v1/users/${user.id}/friends`));
    const friendsData = await friendsResponse.json();
    const friendsCount = friendsData.data ? friendsData.data.length : 0;

    // 5Ô∏è‚É£ Display result
    resultDiv.innerHTML = `
      <div class="card">
        <img src="${avatarUrl}" width="150"><br><br>
        <strong>Username:</strong> ${user.name} <br>
        <strong>User ID:</strong> ${user.id} <br>
        <strong>Created:</strong> ${new Date(user.created).toLocaleDateString()} <br>
        <strong>Friends:</strong> ${friendsCount} <br>
        <strong>Badges:</strong> ${badges} 
      </div>
    `;

    // 6Ô∏è‚É£ Update leaderboard
    updateLeaderboard(user.name);

  } catch (error) {
    resultDiv.innerHTML = "Error loading data.";
    console.error(error);
  }
}

function updateLeaderboard(name) {
  searchHistory.push(name);
  const counts = {};
  searchHistory.forEach(n => counts[n] = (counts[n]||0)+1);
  const sorted = Object.entries(counts).sort((a,b)=>b[1]-a[1]).slice(0,5);

  const ol = document.getElementById("topUsers");
  ol.innerHTML = '';
  sorted.forEach(item => {
    const li = document.createElement('li');
    li.textContent = `${item[0]} (${item[1]})`;
    ol.appendChild(li);
  });
}
</script>

</body>
</html>
